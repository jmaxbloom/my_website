---
categories:  
- ""    #the front matter should be like the one found in, e.g., blog2.md. It cannot be like the normal Rmd we used
- ""
date: "2021-9-28"
description: "I've been performing well in the market. I wanted to use R to figure out exactly how well I've been doing compared to the market." # the title that will show up once someone gets to this page
draft: false
image: pic10.jpg # save picture in \static\img\blogs. Acceptable formats= jpg, jpeg, or png . Your iPhone pics wont work
keywords: ""
slug: invests # slug is the shorthand URL address... no spaces plz
title: Alpha
---
  



```{r, setup, echo=FALSE}
knitr::opts_chunk$set(
  message = FALSE, 
  warning = FALSE, 
  tidy=FALSE,     # display code as typed
  size="small")   # slightly smaller font for code
options(digits = 3)

# default figure size
knitr::opts_chunk$set(
  fig.width=6.75, 
  fig.height=6.75,
  fig.align = "center"
)
```


```{r load-libraries, warning=FALSE, message=FALSE, echo=FALSE}
library(tidyverse)  # Load ggplot2, dplyr, and all the other tidyverse packages
library(lubridate)
library(here)
library(skimr)
library(janitor)
library(vroom)
library(tidyquant)
library(rvest)    # scrape websites
library(purrr)  
library(lubridate) #to handle dates
library(ggrepel)
```


# Returns of portfolio

Lets input our ticker vector based on what I'm invested in. This analysis assumes I bought everything at the same time.

```{r, tickers}

tickers <- c("AAPL","AZN","BWXT","BRK","CRWD","DNN","DLR","ICE","MSFT","MRNA","NXE","HOOD","CRM","URA")
```




```{r get_price_data, message=FALSE, warning=FALSE, cache=TRUE}
# Notice the cache=TRUE argument in the chunk options. Because getting data is time consuming, # cache=TRUE means that once it downloads data, the chunk will not run again next time you knit your Rmd

myStocks <- tickers %>% 
  tq_get(get  = "stock.prices",
         from = "2020-10-10") %>%
  group_by(symbol) 


glimpse(myStocks) # examine the structure of the resulting data frame
```

Financial performance analysis depend on returns; If I buy a stock today for 100 and I sell it tomorrow for 101.75, my one-day return, assuming no transaction costs, is 1.75%. So given the adjusted closing prices, our first step is to calculate daily and monthly returns.


```{r calculate_returns, message=FALSE, warning=FALSE, cache=TRUE}
 
#Total returns
myStocks_returns_total <- myStocks %>%
  tq_transmute(select = adjusted,mutate_fun = periodReturn,period = "yearly", type = "arithmetic",col_rename = "Return", cols = c(nested.col))%>%
  summarise(return = AVERAGE(Return))



```

```{r, risk_return, echo=FALSE}
#Alpha Calculation, assuming market return of 25.6%
myStocks_returns_total$weight <- c(.099,.005,.045,.077,.034,.049,.123,.116,.208,.033,.001,.13,.071)
myStocks_returns_total$beta <- c(1.22,0.18,1.01,1.33,2,0.2,0.73,0.8,1.49,1.61,1.74,1.04,1.18)
myStocks_returns_total%>%
  summarize(PV_Return = sum(weight*return),beta = sum(weight*beta),alpha = (PV_Return - .015)-beta*(PV_Return-.256)) %>% kableExtra::kable() %>% kableExtra::kable_classic()


```
An alpha of **21.6%** is crazy high. Good job me. 